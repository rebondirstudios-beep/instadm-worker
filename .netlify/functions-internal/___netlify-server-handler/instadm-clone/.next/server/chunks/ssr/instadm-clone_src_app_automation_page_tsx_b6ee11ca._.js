module.exports=[65853,a=>{"use strict";var b=a.i(87924),c=a.i(98003),d=a.i(50944),e=a.i(72131),f=a.i(63588),g=a.i(25015),h=a.i(70106);let i=(0,h.default)("pause",[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]]),j=(0,h.default)("square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]),k=(0,h.default)("activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]),l=(0,h.default)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);var m=a.i(92759),n=a.i(21161),o=a.i(38246);function p(){(0,d.useRouter)();let{user:a,isLoaded:h}=(0,c.useUser)(),[p,q]=(0,e.useState)([]),[r,s]=(0,e.useState)([]),[t,u]=(0,e.useState)(""),[v,w]=(0,e.useState)(""),[x,y]=(0,e.useState)({}),[z,A]=(0,e.useState)(!1),[B,C]=(0,e.useState)(null),[D,E]=(0,e.useState)("simulated"),[F,G]=(0,e.useState)(!1),[H,I]=(0,e.useState)([]),J=(0,e.useRef)(null),K=(0,e.useRef)({}),L=(0,e.useRef)({}),M=(0,e.useRef)({}),N=(a,b)=>{let c=new Date().toISOString();I(d=>{let e=[...d,{ts:c,level:a,message:b}];return e.length>500?e.slice(e.length-500):e})};(0,e.useEffect)(()=>{J.current?.scrollIntoView({behavior:"smooth"})},[H.length]),(0,e.useEffect)(()=>{"playwright"===D&&G(!1)},[D]);let[O,P]=(0,e.useState)(!0),[Q,R]=(0,e.useState)(!1),[S,T]=(0,e.useState)({minDelay:45e3,maxDelay:3e5,typingDelay:3e3,readDelay:15e3,sessionRotation:!0,messageVariation:!0,warmupTime:6e5,activeHours:{start:9,end:21}});(0,e.useEffect)(()=>{h&&a&&(async()=>{try{let[a,b]=await Promise.all([fetch("/api/campaigns"),fetch("/api/accounts")]),[c,d]=await Promise.all([a.json(),b.json()]);q(c.campaigns||[]),s((Array.isArray(d.accounts)?d.accounts:[]).map(a=>({id:a.id,username:a.username,isActive:!!a.isActive,dailyLimit:Number(a?.stats?.dailyLimit??a?.dailyLimit??50)})))}catch(a){console.error("Failed to fetch data:",a)}})()},[h,a]);let U=async(a,b)=>{try{let c=await fetch(`/api/campaigns/${a}/messages?instagramAccountId=${encodeURIComponent(b)}`),d=await c.json().catch(()=>({}));if(!c.ok)throw Error(d?.error||`Failed to load outbox (HTTP ${c.status})`);let e=Array.isArray(d?.messages)?d.messages:[],f=0,g=0,h=0;for(let a of e){let b=String(a?.status||"").toLowerCase();"pending"===b?f++:"sent"===b?g++:"failed"===b&&h++}let i={pending:f,sent:g,failed:h,total:e.length};return C(i),i}catch{return C(null),null}};(0,e.useEffect)(()=>{t&&v?U(t,v):C(null)},[t,v]);let V=async(a,b)=>{let c=`${a}-${b}`;if(void 0!==L.current[c]&&null!==L.current[c])return;N("info",`Start requested for campaign=${a} account=${b}`),N("info",`Sender mode=${D}${"playwright"===D?` headless=${F}`:""}`),K.current[c]=!1,M.current[c]=0,L.current[c]=0,A(!0),y(a=>({...a,[c]:{isRunning:!0,lastRun:new Date().toISOString(),nextRun:void 0,processed:a[c]?.processed||0,sent:a[c]?.sent||0,failed:a[c]?.failed||0}}));let d=async()=>{if(K.current[c]){L.current[c]=null,N("warn",`Stopped (flag) for campaign=${a} account=${b}`);return}try{let e=await fetch("/api/automation/send-messages",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({campaignId:a,instagramAccountId:b,maxToProcess:1,skipDelay:!0,senderMode:D,headless:F})}),f=await e.json().catch(()=>({}));if(!e.ok){if(429===e.status){N("warn",String(f?.error||"Daily limit reached")),K.current[c]=!0,L.current[c]&&window.clearTimeout(L.current[c]),L.current[c]=null,y(a=>({...a,[c]:{...a[c]||{processed:0,sent:0,failed:0},isRunning:!1,nextRun:void 0,lastRun:new Date().toISOString()}}));let d=await U(a,b);d&&N("info",`Outbox: pending=${d.pending} sent=${d.sent} failed=${d.failed}`),alert(f?.error||"Daily limit reached");return}throw Error(f?.error||`HTTP ${e.status}`)}if(f?.message==="No pending messages to send"||(f?.processed??0)===0){N("info","No pending messages to send");let e=M.current[c]||0;if(e<1){M.current[c]=e+1,N("info","Outbox empty: auto-queueing more usernames...");let f=await fetch(`/api/campaigns/${a}/queue`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({instagramAccountId:b,limit:50})}),g=await f.json().catch(()=>({})),h="number"==typeof g?.queued?g.queued:0;if(f.ok&&h>0){N("info",`Auto-queued ${h} messages. Continuing...`);let e=await U(a,b);e&&N("info",`Outbox: pending=${e.pending} sent=${e.sent} failed=${e.failed}`),y(a=>({...a,[c]:{...a[c]||{processed:0,sent:0,failed:0},isRunning:!0,nextRun:new Date().toISOString()}})),N("info","Next step in 0s"),L.current[c]=window.setTimeout(()=>{d()},0);return}{let d=String(g?.error||"No new usernames to queue"),e="number"==typeof g?.leadCount||"number"==typeof g?.alreadyUsedInCampaign||"number"==typeof g?.availableToday?` (leadCount=${g?.leadCount??"?"} usedInCampaign=${g?.alreadyUsedInCampaign??"?"} availableToday=${g?.availableToday??"?"})`:"";N("warn",`${d}${e}`),K.current[c]=!0,L.current[c]&&window.clearTimeout(L.current[c]),L.current[c]=null,y(a=>({...a,[c]:{...a[c]||{processed:0,sent:0,failed:0},isRunning:!1,nextRun:void 0,lastRun:new Date().toISOString()}}));let f=await U(a,b);f&&N("info",`Outbox: pending=${f.pending} sent=${f.sent} failed=${f.failed}`);return}}{K.current[c]=!0,L.current[c]&&window.clearTimeout(L.current[c]),L.current[c]=null,y(a=>({...a,[c]:{...a[c]||{processed:0,sent:0,failed:0},isRunning:!1,nextRun:void 0,lastRun:new Date().toISOString()}}));let d=await U(a,b);d&&N("info",`Outbox: pending=${d.pending} sent=${d.sent} failed=${d.failed}`);return}}let g="string"==typeof f?.attemptRecipientUsername?f.attemptRecipientUsername:f?.lastRecipientUsername,h="string"==typeof f?.attemptOutcome?f.attemptOutcome:null,i="number"==typeof f?.attemptMs?f.attemptMs:null,j=f?.mode?` mode=${String(f.mode)}`:"",k=f?.hardFailure===!0,l="string"==typeof f?.attemptError&&f.attemptError.length?f.attemptError:"string"==typeof f?.lastError?f.lastError:"";N("info",`Step: processed=${f?.processed||0} sent=${f?.sent||0} failed=${f?.failed||0}`+(g?` recipient=@${g}`:"")+(h?` outcome=${h}`:"")+(null!==i?` time=${Math.round(i)}ms`:"")+(k?" hard_failure=true":"")+j),(f?.failed??0)>0&&l&&N(k?"error":"warn",`${k?"Hard":"Soft"} failure: ${l}`);let m=Array.isArray(f?.attemptDebugTrace)?f.attemptDebugTrace:null,n="string"==typeof f?.attemptScreenshotPath?f.attemptScreenshotPath:"";if(m&&m.length)for(let a of(N("info",`Playwright trace (last ${m.length}):`),m.slice(-15)))N("info",`  ${a}`);n&&N("info",`Playwright screenshot: ${n}`),y(a=>({...a,[c]:{...a[c]||{processed:0,sent:0,failed:0},isRunning:!0,lastRun:new Date().toISOString(),processed:(a[c]?.processed||0)+(f?.processed||0),sent:(a[c]?.sent||0)+(f?.sent||0),failed:(a[c]?.failed||0)+(f?.failed||0)}}));let o=await U(a,b);o&&N("info",`Outbox: pending=${o.pending} sent=${o.sent} failed=${o.failed}`);let p=l&&(l.includes("Instagram requires verification")||l.includes("Login failed")||l.includes("step=login_form")||l.includes("Executable doesn't exist")||l.includes("Playwright is not available")||l.includes("Cannot find module 'playwright'")||l.includes("browserType.launch")),q=(f?.mode==="playwright"||"playwright"===D)&&f?.hardFailure===!0&&p;if(q){K.current[c]=!0,L.current[c]&&window.clearTimeout(L.current[c]),L.current[c]=null,y(a=>({...a,[c]:{...a[c]||{processed:0,sent:0,failed:0},isRunning:!1,nextRun:void 0,lastRun:new Date().toISOString()}})),N("warn","Stopped: hard Playwright failure (login/verification/browser). Fix it and restart.");return}(f?.mode==="playwright"||"playwright"===D)&&(f?.failed??0)>0&&!q&&N("info","Continuing: soft failure, moving to next pending username.")}catch(a){N("error",a instanceof Error?a.message:"Automation failed"),K.current[c]=!0,L.current[c]&&window.clearTimeout(L.current[c]),L.current[c]=null,y(a=>({...a,[c]:{...a[c]||{processed:0,sent:0,failed:0},isRunning:!1,nextRun:void 0,lastRun:new Date().toISOString()}}));return}let e=O?Math.floor(Math.random()*(S.maxDelay-S.minDelay+1))+S.minDelay:0,f=e?new Date(Date.now()+e).toISOString():void 0;N("info",`Next step in ${Math.round(e/1e3)}s`),y(a=>({...a,[c]:{...a[c]||{processed:0,sent:0,failed:0},isRunning:!0,nextRun:f}})),L.current[c]=window.setTimeout(()=>{d()},e)};A(!1),d()},W=async(a,b)=>{try{let c=`${a}-${b}`;N("warn",`Stop requested for campaign=${a} account=${b}`),K.current[c]=!0,L.current[c]&&(window.clearTimeout(L.current[c]),L.current[c]=null),y(c=>({...c,[`${a}-${b}`]:{...c[`${a}-${b}`],isRunning:!1,nextRun:void 0}}))}catch(a){console.error("Stop automation error:",a),N("error","Stop automation error")}};return h&&a?(0,b.jsxs)("div",{className:"min-h-screen bg-gray-50 text-gray-900",children:[(0,b.jsx)("nav",{className:"bg-white border-b border-gray-200",children:(0,b.jsx)("div",{className:"max-w-7xl mx-auto px-6 py-4",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)(o.default,{href:"/",className:"flex items-center space-x-2",children:[(0,b.jsx)(f.MessageSquare,{className:"h-8 w-8 text-purple-600"}),(0,b.jsx)("span",{className:"text-2xl font-bold text-gray-900",children:"Rebondir Studios"})]}),(0,b.jsxs)("div",{className:"flex items-center space-x-6",children:[(0,b.jsx)(o.default,{href:"/dashboard",className:"text-gray-600 hover:text-gray-900",children:"Dashboard"}),(0,b.jsx)(o.default,{href:"/campaigns",className:"text-gray-600 hover:text-gray-900",children:"Campaigns"}),(0,b.jsx)(o.default,{href:"/accounts",className:"text-gray-600 hover:text-gray-900",children:"Accounts"}),(0,b.jsx)(o.default,{href:"/automation",className:"text-purple-600 font-medium",children:"Automation"}),(0,b.jsx)(o.default,{href:"/analytics",className:"text-gray-600 hover:text-gray-900",children:"Analytics"}),(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)("div",{className:"w-8 h-8 bg-purple-600 rounded-full flex items-center justify-center text-white font-semibold",children:a.firstName?.[0]||a.emailAddresses[0]?.emailAddress[0]?.toUpperCase()}),(0,b.jsx)("span",{className:"text-gray-700",children:a.firstName||a.emailAddresses[0]?.emailAddress})]})]})]})})}),(0,b.jsxs)("main",{className:"max-w-6xl mx-auto px-6 py-8",children:[(0,b.jsxs)("div",{className:"mb-8",children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Message Automation"}),(0,b.jsx)("p",{className:"text-gray-600",children:"Configure and monitor automated message sending for your campaigns."})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8",children:[(0,b.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[(0,b.jsxs)("h2",{className:"text-lg font-semibold text-gray-900 mb-6 flex items-center space-x-2",children:[(0,b.jsx)(n.Settings,{className:"h-5 w-5 text-purple-600"}),(0,b.jsx)("span",{children:"Configuration"})]}),(0,b.jsxs)("div",{className:"space-y-5",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Campaign"}),(0,b.jsxs)("select",{value:t,onChange:a=>u(a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all",children:[(0,b.jsx)("option",{value:"",children:"Choose a campaign..."}),p.map(a=>(0,b.jsxs)("option",{value:a.id,children:[a.name," (",a.status,")"]},a.id))]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Instagram Account"}),(0,b.jsxs)("select",{value:v,onChange:a=>w(a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all",children:[(0,b.jsx)("option",{value:"",children:"Choose an account..."}),r.filter(a=>a.isActive).map(a=>(0,b.jsxs)("option",{value:a.id,children:["@",a.username," (Limit: ",a.dailyLimit,"/day)"]},a.id))]})]})]})]}),(0,b.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[(0,b.jsxs)("h2",{className:"text-lg font-semibold text-gray-900 mb-6 flex items-center space-x-2",children:[(0,b.jsx)(m.Send,{className:"h-5 w-5 text-purple-600"}),(0,b.jsx)("span",{children:"Send Mode"})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("label",{className:"flex items-center space-x-3 p-3 border rounded-lg cursor-pointer transition-all hover:bg-gray-50",children:[(0,b.jsx)("input",{type:"radio",name:"senderMode",checked:"simulated"===D,onChange:()=>E("simulated"),className:"w-4 h-4 text-purple-600 focus:ring-purple-500"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"font-medium text-gray-900",children:"Simulated (DB only)"}),(0,b.jsx)("div",{className:"text-sm text-gray-500",children:"For testing; no real DMs sent"})]})]}),(0,b.jsxs)("label",{className:"flex items-center space-x-3 p-3 border rounded-lg cursor-pointer transition-all hover:bg-gray-50",children:[(0,b.jsx)("input",{type:"radio",name:"senderMode",checked:"playwright"===D,onChange:()=>E("playwright"),className:"w-4 h-4 text-purple-600 focus:ring-purple-500"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"font-medium text-gray-900",children:"Playwright (Real DM)"}),(0,b.jsx)("div",{className:"text-sm text-gray-500",children:"Sends actual Instagram DMs"})]})]})]}),"playwright"===D&&(0,b.jsxs)("div",{className:"mt-4 p-3 bg-gray-50 rounded-lg",children:[(0,b.jsxs)("label",{className:"flex items-center space-x-2 text-sm text-gray-700",children:[(0,b.jsx)("input",{type:"checkbox",checked:F,onChange:a=>G(a.target.checked),className:"w-4 h-4 text-purple-600 focus:ring-purple-500 rounded"}),(0,b.jsx)("span",{children:"Headless mode"})]}),(0,b.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:"Turn off for 2FA/verification prompts"})]})]})]}),(0,b.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[(0,b.jsxs)("h2",{className:"text-lg font-semibold text-gray-900 mb-6 flex items-center space-x-2",children:[(0,b.jsx)(l,{className:"h-5 w-5 text-purple-600"}),(0,b.jsx)("span",{children:"Humanization"})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("label",{className:"flex items-center space-x-2 text-sm text-gray-700",children:[(0,b.jsx)("input",{type:"checkbox",checked:O,onChange:a=>P(a.target.checked),className:"w-4 h-4 text-purple-600 focus:ring-purple-500 rounded"}),(0,b.jsx)("span",{children:"Enable humanization"})]}),O&&(0,b.jsxs)("div",{className:"space-y-3 text-sm text-gray-600",children:[(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{children:"Min delay:"}),(0,b.jsx)("input",{type:"number",min:"5",max:"60",value:Math.round(S.minDelay/1e3),onChange:a=>T(b=>({...b,minDelay:1e3*Number(a.target.value)})),className:"w-20 px-2 py-1 border border-gray-300 rounded"}),(0,b.jsx)("span",{children:"seconds"})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{children:"Max delay:"}),(0,b.jsx)("input",{type:"number",min:"5",max:"300",value:Math.round(S.maxDelay/1e3),onChange:a=>T(b=>({...b,maxDelay:1e3*Number(a.target.value)})),className:"w-20 px-2 py-1 border border-gray-300 rounded"}),(0,b.jsx)("span",{children:"seconds"})]})]})]})]})]}),(0,b.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Start Automation"}),(0,b.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:t&&v?"Ready to start with selected campaign and account":"Select a campaign and account above"})]}),(0,b.jsx)("button",{onClick:()=>{t&&v?V(t,v):alert("Please select a campaign and Instagram account")},disabled:!t||!v||z,className:"px-6 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed font-medium transition-colors",children:z?(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent animate-spin"}),(0,b.jsx)("span",{children:"Starting..."})]}):"Start Automation"})]})}),(0,b.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100",children:[(0,b.jsx)("div",{className:"p-6 border-b border-gray-100",children:(0,b.jsxs)("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center space-x-2",children:[(0,b.jsx)(k,{className:"h-5 w-5 text-purple-600"}),(0,b.jsx)("span",{children:"Active Automations"})]})}),(0,b.jsx)("div",{className:"p-6",children:0===Object.keys(x).length?(0,b.jsxs)("div",{className:"text-center py-8",children:[(0,b.jsx)(j,{className:"h-12 w-12 text-gray-400 mx-auto mb-3"}),(0,b.jsx)("p",{className:"text-gray-500",children:"No automations running"}),(0,b.jsx)("p",{className:"text-gray-400 text-sm mt-2",children:"Configure and start an automation above"})]}):(0,b.jsx)("div",{className:"space-y-4",children:Object.entries(x).map(([a,c])=>{let[d,e]=a.split("-"),f=p.find(a=>a.id===d),h=r.find(a=>a.id===e);return f&&h?(0,b.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"font-semibold text-gray-900",children:f.name}),(0,b.jsxs)("p",{className:"text-sm text-gray-500",children:["via @",h.username]})]}),(0,b.jsx)("div",{className:"flex items-center space-x-2",children:c.isRunning?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"w-3 h-3 bg-green-500 rounded-full animate-pulse"}),(0,b.jsx)("span",{className:"text-sm text-green-600 font-medium",children:"Running"}),(0,b.jsx)("button",{onClick:()=>W(d,e),className:"text-red-600 hover:text-red-700 text-sm",children:(0,b.jsx)(i,{className:"h-4 w-4 inline"})})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"w-3 h-3 bg-gray-400 rounded-full"}),(0,b.jsx)("span",{className:"text-sm text-gray-600 font-medium",children:"Stopped"}),(0,b.jsx)("button",{onClick:()=>t===d&&v===e&&V(d,e),className:"text-green-600 hover:text-green-700 text-sm",children:(0,b.jsx)(g.Play,{className:"h-4 w-4 inline"})})]})})]}),(0,b.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"text-gray-500",children:"Processed"}),(0,b.jsx)("div",{className:"font-semibold text-gray-900",children:c.processed})]}),(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"text-gray-500",children:"Sent"}),(0,b.jsx)("div",{className:"font-semibold text-green-600",children:c.sent})]}),(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"text-gray-500",children:"Failed"}),(0,b.jsx)("div",{className:"font-semibold text-red-600",children:c.failed})]})]}),c.lastRun&&(0,b.jsxs)("div",{className:"mt-3 pt-3 border-t border-gray-200",children:[(0,b.jsxs)("div",{className:"text-xs text-gray-500",children:["Last run: ",new Date(c.lastRun).toLocaleString()]}),c.nextRun&&(0,b.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:["Next run: ",new Date(c.nextRun).toLocaleString()]})]})]},a):null})})})]}),(0,b.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6 mt-8",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,b.jsxs)("h2",{className:"text-lg font-semibold text-gray-900 flex items-center space-x-2",children:[(0,b.jsx)(k,{className:"h-5 w-5 text-purple-600"}),(0,b.jsx)("span",{children:"Automation Logs"})]}),(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)("button",{type:"button",onClick:()=>I([]),className:"px-3 py-1.5 text-sm rounded-lg border border-gray-300 hover:bg-gray-50",children:"Clear"}),(0,b.jsx)("button",{type:"button",onClick:async()=>{let a=H.map(a=>`${a.ts} [${a.level.toUpperCase()}] ${a.message}`).join("\n");try{await navigator.clipboard.writeText(a),N("info","Copied logs to clipboard")}catch{N("error","Failed to copy logs")}},className:"px-3 py-1.5 text-sm rounded-lg border border-gray-300 hover:bg-gray-50",children:"Copy"})]})]}),(0,b.jsxs)("div",{className:"h-64 overflow-auto rounded-lg border border-gray-200 bg-gray-50 p-3 font-mono text-xs",children:[0===H.length?(0,b.jsx)("div",{className:"text-gray-500",children:"No logs yet. Click Queue or Start Automation to begin."}):H.map((a,c)=>(0,b.jsxs)("div",{className:"error"===a.level?"text-red-700":"warn"===a.level?"text-amber-700":"text-gray-900",children:[a.ts," [",a.level.toUpperCase(),"] ",a.message]},c)),(0,b.jsx)("div",{ref:J})]})]}),(0,b.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[(0,b.jsxs)("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center space-x-2",children:[(0,b.jsx)(n.Settings,{className:"h-5 w-5 text-purple-600"}),(0,b.jsx)("span",{children:"Humanization Settings"})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,b.jsx)("input",{type:"checkbox",checked:O,onChange:a=>P(a.target.checked),className:"h-4 w-4 text-purple-600"}),(0,b.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Enable Humanization"})]}),(0,b.jsxs)("button",{type:"button",onClick:()=>R(!Q),className:"text-purple-600 hover:text-purple-700 text-sm",children:[Q?"Hide":"Show"," Advanced"]})]}),Q&&(0,b.jsxs)("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg space-y-4",children:[(0,b.jsx)("h3",{className:"text-sm font-semibold text-gray-900 mb-3",children:"Advanced Configuration"}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Min Delay (seconds)"}),(0,b.jsx)("input",{type:"number",value:Math.round(S.minDelay/1e3),onChange:a=>T(b=>({...b,minDelay:1e3*parseInt(a.target.value||"0",10)})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",min:"30",max:"300"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Max Delay (seconds)"}),(0,b.jsx)("input",{type:"number",value:Math.round(S.maxDelay/1e3),onChange:a=>T(b=>({...b,maxDelay:1e3*parseInt(a.target.value||"0",10)})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",min:"60",max:"600"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Typing Simulation (seconds)"}),(0,b.jsx)("input",{type:"number",value:Math.round(S.typingDelay/1e3),onChange:a=>T(b=>({...b,typingDelay:1e3*parseInt(a.target.value||"0",10)})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",min:"0",max:"10"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Read Delay (seconds)"}),(0,b.jsx)("input",{type:"number",value:Math.round(S.readDelay/1e3),onChange:a=>T(b=>({...b,readDelay:1e3*parseInt(a.target.value||"0",10)})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",min:"5",max:"60"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Warmup Time (minutes)"}),(0,b.jsx)("input",{type:"number",value:Math.round(S.warmupTime/6e4),onChange:a=>T(b=>({...b,warmupTime:6e4*parseInt(a.target.value||"0",10)})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",min:"0",max:"30"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Active Hours"}),(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)("input",{type:"number",value:S.activeHours.start,onChange:a=>T(b=>({...b,activeHours:{...b.activeHours,start:parseInt(a.target.value||"0",10)}})),className:"w-20 px-3 py-2 border border-gray-300 rounded-lg",min:"0",max:"23"}),(0,b.jsx)("span",{className:"text-gray-500",children:"to"}),(0,b.jsx)("input",{type:"number",value:S.activeHours.end,onChange:a=>T(b=>({...b,activeHours:{...b.activeHours,end:parseInt(a.target.value||"0",10)}})),className:"w-20 px-3 py-2 border border-gray-300 rounded-lg",min:"0",max:"23"})]})]}),(0,b.jsxs)("div",{className:"md:col-span-2 flex items-center space-x-6",children:[(0,b.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,b.jsx)("input",{type:"checkbox",checked:S.sessionRotation,onChange:a=>T(b=>({...b,sessionRotation:a.target.checked})),className:"h-4 w-4 text-purple-600"}),(0,b.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Session Rotation"})]}),(0,b.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,b.jsx)("input",{type:"checkbox",checked:S.messageVariation,onChange:a=>T(b=>({...b,messageVariation:a.target.checked})),className:"h-4 w-4 text-purple-600"}),(0,b.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Message Variation"})]})]})]})]})]})]})]})]}):null}a.s(["default",()=>p],65853)}];

//# sourceMappingURL=instadm-clone_src_app_automation_page_tsx_b6ee11ca._.js.map