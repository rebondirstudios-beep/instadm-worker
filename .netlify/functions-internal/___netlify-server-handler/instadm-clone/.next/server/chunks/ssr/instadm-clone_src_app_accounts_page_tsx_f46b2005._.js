module.exports=[43024,a=>{"use strict";var b=a.i(87924),c=a.i(98003),d=a.i(50944),e=a.i(63588),f=a.i(60246),g=a.i(15618),h=a.i(3314),i=a.i(21161),j=a.i(17755),k=a.i(16201),l=a.i(62722);let m=(0,a.i(70106).default)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);var n=a.i(38246),o=a.i(72131);function p(){let a=(0,d.useRouter)(),{user:p,isLoaded:q}=(0,c.useUser)();(0,o.useEffect)(()=>{q&&!p&&a.push("/login")},[q,a,p]);let[r,s]=(0,o.useState)(null),[t,u]=(0,o.useState)(null),[v,w]=(0,o.useState)(null),[x,y]=(0,o.useState)(""),[z,A]=(0,o.useState)(!1),[B,C]=(0,o.useState)(!1),[D,E]=(0,o.useState)([]);(0,o.useEffect)(()=>{if(!q||!p)return;let a=!1;return(async()=>{try{let b=await fetch("/api/accounts"),c=await b.json().catch(()=>({}));if(!b.ok)throw Error(c?.error||`Failed to load accounts (HTTP ${b.status})`);if(a)return;E(Array.isArray(c?.accounts)?c.accounts:[])}catch(b){a||window.alert(b?.message||"Failed to load accounts")}})(),()=>{a=!0}},[q,p]);let F=(0,o.useMemo)(()=>({totalAccounts:D.length,activeAccounts:D.filter(a=>a.isActive).length,connectedAccounts:D.filter(a=>"connected"===a.status).length,totalMessagesToday:D.reduce((a,b)=>a+b.stats.dailyUsed,0)}),[D]),G=async a=>{try{await navigator.clipboard.writeText(a),window.alert("Copied to clipboard")}catch{window.alert("Copy failed")}},H=async a=>{if(window.confirm("Delete this account?"))try{let b=await fetch(`/api/accounts/${a}`,{method:"DELETE"}),c=await b.json().catch(()=>({}));if(!b.ok)throw Error(c?.error||`Failed to delete account (HTTP ${b.status})`);E(b=>b.filter(b=>b.id!==a)),s(null),v?.id===a&&w(null)}catch(a){window.alert(a?.message||"Failed to delete account")}},I=async a=>{let b=D.find(b=>b.id===a);if(!b)return;let c=!b.isActive;try{let b=await fetch(`/api/accounts/${a}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({isActive:c})}),d=await b.json().catch(()=>({}));if(!b.ok)throw Error(d?.error||`Failed to update account (HTTP ${b.status})`);E(b=>b.map(b=>b.id===a?{...b,isActive:c}:b)),s(null),v?.id===a&&w({...v,isActive:c})}catch(a){window.alert(a?.message||"Failed to update account")}},J=async a=>{u(a);try{let b=D.find(b=>b.id===a);b?.username&&window.open(`https://www.instagram.com/${b.username}/`,"_blank")}finally{u(null)}},K=async()=>{if(v){if(!x)return void window.alert("Enter a password first");C(!0);try{let a=await fetch(`/api/accounts/${v.id}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:x})}),b=await a.json().catch(()=>({}));if(!a.ok)throw Error(b?.error||`Failed to save password (HTTP ${a.status})`);window.alert("Password saved"),y("")}catch(a){window.alert(a?.message||"Failed to save password")}finally{C(!1)}}};return q&&p?(0,b.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,b.jsx)("nav",{className:"bg-white border-b border-gray-200",children:(0,b.jsx)("div",{className:"max-w-7xl mx-auto px-6 py-4",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)(n.default,{href:"/",className:"flex items-center space-x-2",children:[(0,b.jsx)(e.MessageSquare,{className:"h-8 w-8 text-purple-600"}),(0,b.jsx)("span",{className:"text-2xl font-bold text-gray-900",children:"Rebondir Studios"})]}),(0,b.jsxs)("div",{className:"flex items-center space-x-6",children:[(0,b.jsx)(n.default,{href:"/dashboard",className:"text-gray-600 hover:text-gray-900",children:"Dashboard"}),(0,b.jsx)(n.default,{href:"/campaigns",className:"text-gray-600 hover:text-gray-900",children:"Campaigns"}),(0,b.jsx)(n.default,{href:"/accounts",className:"text-purple-600 font-medium",children:"Accounts"}),(0,b.jsx)(n.default,{href:"/templates",className:"text-gray-600 hover:text-gray-900",children:"Templates"}),(0,b.jsx)(n.default,{href:"/leads",className:"text-gray-600 hover:text-gray-900",children:"Leads"}),(0,b.jsx)(n.default,{href:"/analytics",className:"text-gray-600 hover:text-gray-900",children:"Analytics"}),(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)("div",{className:"w-8 h-8 bg-purple-600 rounded-full flex items-center justify-center text-white font-semibold",children:p.firstName?.[0]||p.emailAddresses?.[0]?.emailAddress?.[0]?.toUpperCase()}),(0,b.jsx)("span",{className:"text-gray-700",children:p.firstName||p.emailAddresses?.[0]?.emailAddress})]})]})]})})}),(0,b.jsxs)("main",{className:"max-w-7xl mx-auto px-6 py-8",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Instagram Accounts"}),(0,b.jsx)("p",{className:"text-gray-600",children:"Manage your Instagram accounts and proxy settings"})]}),(0,b.jsxs)(n.default,{href:"/accounts/new",className:"bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 transition-colors flex items-center space-x-2",children:[(0,b.jsx)(g.Plus,{className:"h-5 w-5"}),(0,b.jsx)("span",{children:"Add Account"})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[(0,b.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,b.jsx)(f.Users,{className:"h-8 w-8 text-purple-600"}),(0,b.jsx)("span",{className:"text-sm text-gray-500 font-medium",children:"—"})]}),(0,b.jsx)("h3",{className:"text-2xl font-bold text-gray-900",children:F.totalAccounts}),(0,b.jsx)("p",{className:"text-gray-600",children:"Total Accounts"})]}),(0,b.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,b.jsx)(k.CheckCircle,{className:"h-8 w-8 text-green-600"}),(0,b.jsx)("span",{className:"text-sm text-gray-500 font-medium",children:"—"})]}),(0,b.jsx)("h3",{className:"text-2xl font-bold text-gray-900",children:F.activeAccounts}),(0,b.jsx)("p",{className:"text-gray-600",children:"Active Accounts"})]}),(0,b.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,b.jsx)(h.Shield,{className:"h-8 w-8 text-blue-600"}),(0,b.jsx)("span",{className:"text-sm text-gray-500 font-medium",children:"—"})]}),(0,b.jsx)("h3",{className:"text-2xl font-bold text-gray-900",children:F.connectedAccounts}),(0,b.jsx)("p",{className:"text-gray-600",children:"Connected"})]}),(0,b.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,b.jsx)(e.MessageSquare,{className:"h-8 w-8 text-orange-600"}),(0,b.jsx)("span",{className:"text-sm text-gray-500 font-medium",children:"—"})]}),(0,b.jsx)("h3",{className:"text-2xl font-bold text-gray-900",children:F.totalMessagesToday}),(0,b.jsx)("p",{className:"text-gray-600",children:"Messages Today"})]})]}),(0,b.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden",children:(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"w-full",children:[(0,b.jsx)("thead",{className:"bg-gray-50 border-b border-gray-200",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Account"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Daily Usage"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Success Rate"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Proxy"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Last Login"}),(0,b.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,b.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:D.map(a=>(0,b.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,b.jsxs)("div",{className:"flex items-center",children:[(0,b.jsx)("div",{className:"w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center",children:(0,b.jsx)("span",{className:"text-purple-600 font-semibold",children:a.username.charAt(0).toUpperCase()})}),(0,b.jsxs)("div",{className:"ml-4",children:[(0,b.jsxs)("div",{className:"text-sm font-medium text-gray-900",children:["@",a.username]}),(0,b.jsxs)("div",{className:"text-sm text-gray-500",children:[a.stats.messagesSent.toLocaleString()," total messages"]})]})]})}),(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(a=>{switch(a){case"connected":return(0,b.jsx)(k.CheckCircle,{className:"h-5 w-5 text-green-600"});case"disconnected":return(0,b.jsx)(l.XCircle,{className:"h-5 w-5 text-red-600"});case"error":return(0,b.jsx)(m,{className:"h-5 w-5 text-yellow-600"});default:return(0,b.jsx)(m,{className:"h-5 w-5 text-gray-600"})}})(a.status),(0,b.jsx)("span",{className:`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${(a=>{switch(a){case"connected":return"bg-green-100 text-green-800";case"disconnected":return"bg-red-100 text-red-800";case"error":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}})(a.status)}`,children:a.status})]})}),(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,b.jsx)("div",{className:"flex items-center",children:(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsxs)("div",{className:"text-sm text-gray-900",children:[a.stats.dailyUsed," / ",a.stats.dailyLimit]}),(0,b.jsx)("div",{className:"w-24 bg-gray-200 rounded-full h-2 mt-1",children:(0,b.jsx)("div",{className:`h-2 rounded-full ${a.stats.dailyUsed/a.stats.dailyLimit>.8?"bg-red-600":a.stats.dailyUsed/a.stats.dailyLimit>.6?"bg-yellow-600":"bg-green-600"}`,style:{width:`${Math.min(a.stats.dailyUsed/a.stats.dailyLimit*100,100)}%`}})})]})})}),(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,b.jsxs)("div",{className:"flex items-center",children:[(0,b.jsxs)("div",{className:"text-sm text-gray-900",children:[a.stats.successRate,"%"]}),(0,b.jsx)("div",{className:"ml-2 w-16 bg-gray-200 rounded-full h-2",children:(0,b.jsx)("div",{className:"bg-green-600 h-2 rounded-full",style:{width:`${a.stats.successRate}%`}})})]})}),(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:a.proxy||"No proxy"}),(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:a.lastLogin?new Date(a.lastLogin).toLocaleDateString():"—"}),(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:(0,b.jsxs)("div",{className:"flex items-center justify-end space-x-2 relative",children:[(0,b.jsx)("button",{type:"button",disabled:t===a.id,onClick:()=>J(a.id),className:"text-purple-600 hover:text-purple-900 disabled:opacity-50",children:t===a.id?"Testing...":"Test"}),(0,b.jsx)("button",{type:"button",onClick:()=>{w(a),y(""),A(!1)},className:"text-gray-400 hover:text-gray-600",children:(0,b.jsx)(i.Settings,{className:"h-4 w-4"})}),(0,b.jsx)("button",{type:"button",onClick:()=>s(b=>b===a.id?null:a.id),className:"text-gray-400 hover:text-gray-600",children:(0,b.jsx)(j.MoreHorizontal,{className:"h-4 w-4"})}),r===a.id&&(0,b.jsxs)("div",{className:"absolute right-0 top-8 z-10 w-48 rounded-lg border border-gray-200 bg-white shadow-md",children:[(0,b.jsx)("button",{type:"button",onClick:()=>window.open(`https://instagram.com/${a.username}`,"_blank"),className:"w-full text-left px-3 py-2 text-sm hover:bg-gray-50",children:"Open Instagram Profile"}),(0,b.jsx)("button",{type:"button",onClick:()=>G(`@${a.username}`),className:"w-full text-left px-3 py-2 text-sm hover:bg-gray-50",children:"Copy Username"}),(0,b.jsx)("button",{type:"button",onClick:()=>I(a.id),className:"w-full text-left px-3 py-2 text-sm hover:bg-gray-50",children:a.isActive?"Disable":"Enable"}),(0,b.jsx)("button",{type:"button",onClick:()=>H(a.id),className:"w-full text-left px-3 py-2 text-sm text-red-600 hover:bg-gray-50",children:"Delete"})]})]})})]},a.id))})]})})}),v&&(0,b.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[(0,b.jsx)("div",{className:"absolute inset-0 bg-black/40",onClick:()=>{w(null),y(""),A(!1)}}),(0,b.jsxs)("div",{className:"relative w-full max-w-lg rounded-xl bg-white p-6 shadow-lg",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Account Settings"}),(0,b.jsx)("button",{type:"button",onClick:()=>{w(null),y(""),A(!1)},className:"text-gray-500 hover:text-gray-700",children:"Close"})]}),(0,b.jsxs)("div",{className:"space-y-2 text-sm text-gray-700",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-gray-500",children:"Username:"})," @",v.username]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-gray-500",children:"Status:"})," ",v.status]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-gray-500",children:"Active:"})," ",v.isActive?"Yes":"No"]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-gray-500",children:"Proxy:"})," ",v.proxy||"No proxy"]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-gray-500",children:"Daily Limit:"})," ",v.stats.dailyLimit]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-gray-500",children:"Daily Used:"})," ",v.stats.dailyUsed]})]}),(0,b.jsxs)("div",{className:"mt-6 border-t border-gray-200 pt-4",children:[(0,b.jsx)("div",{className:"text-sm font-medium text-gray-900 mb-2",children:"Instagram Password (for Playwright)"}),(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)("input",{type:z?"text":"password",value:x,onChange:a=>y(a.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg",placeholder:"Enter password"}),(0,b.jsx)("button",{type:"button",onClick:()=>A(a=>!a),className:"px-3 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:z?"Hide":"Show"}),(0,b.jsx)("button",{type:"button",disabled:B,onClick:K,className:"px-3 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50",children:B?"Saving...":"Save"})]})]}),(0,b.jsxs)("div",{className:"mt-6 flex items-center justify-end space-x-3",children:[(0,b.jsx)("button",{type:"button",onClick:()=>J(v.id),className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Test"}),(0,b.jsx)("button",{type:"button",onClick:()=>I(v.id),className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:v.isActive?"Disable":"Enable"})]})]})]}),0===D.length&&(0,b.jsxs)("div",{className:"text-center py-12",children:[(0,b.jsx)(f.Users,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),(0,b.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Instagram accounts yet"}),(0,b.jsx)("p",{className:"text-gray-500 mb-6",children:"Add your first Instagram account to get started"}),(0,b.jsxs)(n.default,{href:"/accounts/new",className:"bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 transition-colors inline-flex items-center space-x-2",children:[(0,b.jsx)(g.Plus,{className:"h-5 w-5"}),(0,b.jsx)("span",{children:"Add Account"})]})]})]})]}):null}a.s(["default",()=>p],43024)}];

//# sourceMappingURL=instadm-clone_src_app_accounts_page_tsx_f46b2005._.js.map