module.exports=[88091,a=>{"use strict";var b=a.i(87924),c=a.i(72131);function d(a){if(!a)return"—";let b=new Date(a);return Number.isNaN(b.getTime())?"—":b.toLocaleString()}function e(){let[a,e]=(0,c.useState)(null),[f,g]=(0,c.useState)(""),[h,i]=(0,c.useState)(!0),j=(0,c.useMemo)(()=>d(a?.serverTime??null),[a?.serverTime]);return((0,c.useEffect)(()=>{let a=!0,b=async()=>{try{let b=await fetch("/api/automation/live-stats",{cache:"no-store"}),c=await b.json().catch(()=>({}));if(!b.ok)throw Error(c?.error||`Request failed (HTTP ${b.status})`);if(!a)return;e(c),g("")}catch(b){if(!a)return;g(b instanceof Error?b.message:"Failed to load live stats")}finally{if(!a)return;i(!1)}};b();let c=window.setInterval(b,5e3);return()=>{a=!1,window.clearInterval(c)}},[]),h)?(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("span",{className:"text-sm text-gray-600",children:"Pending Messages"}),(0,b.jsx)("span",{className:"text-lg font-semibold text-orange-600",children:"…"})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("span",{className:"text-sm text-gray-600",children:"Sent Today"}),(0,b.jsx)("span",{className:"text-lg font-semibold text-green-600",children:"…"})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("span",{className:"text-sm text-gray-600",children:"Failed Today"}),(0,b.jsx)("span",{className:"text-lg font-semibold text-red-600",children:"…"})]}),(0,b.jsx)("div",{className:"text-xs text-gray-400",children:"Updating…"})]}):f?(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-sm text-red-600",children:f}),(0,b.jsx)("div",{className:"mt-2 text-xs text-gray-500",children:"Auto-retrying every 5 seconds"})]}):(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("span",{className:"text-sm text-gray-600",children:"Pending Messages"}),(0,b.jsx)("span",{className:"text-lg font-semibold text-orange-600",children:a?.pending??0})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("span",{className:"text-sm text-gray-600",children:"Sent Today"}),(0,b.jsx)("span",{className:"text-lg font-semibold text-green-600",children:a?.sentToday??0})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("span",{className:"text-sm text-gray-600",children:"Failed Today"}),(0,b.jsx)("span",{className:"text-lg font-semibold text-red-600",children:a?.failedToday??0})]})]}),(0,b.jsxs)("div",{className:"mt-4 pt-4 border-t border-gray-100",children:[(0,b.jsxs)("div",{className:"text-xs text-gray-500",children:["Last update: ",j]}),(0,b.jsxs)("div",{className:"mt-1 text-xs text-gray-500",children:["Last sent: ",d(a?.lastSentAt??null),a?.lastSentTo?` → @${a.lastSentTo}`:""]})]})]})}a.s(["default",()=>e])}];

//# sourceMappingURL=instadm-clone_src_components_AutomationLiveStatsCard_tsx_983e601c._.js.map